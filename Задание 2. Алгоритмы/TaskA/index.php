<?php

    function solve($data) {

        // Разбиваем входные данные на строки, удаляя лишние пробелы и переносы
        $lines = explode("\n", trim($data));
        $index = 0;

        // Получаем количество ставок
        $n = (int)trim($lines[$index++]);
        $bets = [];

        // Читаем информацию о ставках
        for ($i = 0; $i < $n; $i++) {
            // Разбиваем строку на массив (ID игры, сумма ставки, ожидаемый исход)
            $bets[] = explode(" ", trim($lines[$index++]));
        }

        // Получаем количество игр
        $m = (int)trim($lines[$index++]);
        $games = [];

        // Читаем информацию о играх
        for ($i = 0; $i < $m; $i++) {
            // Разбиваем строку на массив (ID игры, коэффициенты для L, R, D, фактический исход)
            $games[] = explode(" ", trim($lines[$index++]));
        }

        // Баланс
        $balance = 0;

        // Проходимся по каждой ставке
        for ($i = 0; $i < $n; $i++) {
            // Проверяем, совпадает ли прогноз с фактическим исходом игры
            if ($games[$bets[$i][0] - 1][4] != $bets[$i][2]) {
                // Если ставка проиграла, вычитаем сумму ставки из баланса
                $balance -= $bets[$i][1];
            } else {
                // Если ставка выиграла, рассчитываем выигрыш
                // Создаём словарь для определения индекса коэффициента исхода
                $index = ['L' => 1, 'R' => 2, 'D' => 3];

                // Получаем индекс коэффициента для фактического исхода игры
                $temp = $index[$games[$bets[$i][0] - 1][4]];

                // Рассчитываем выигрыш: (сумма ставки * коэффициент) - сумма ставки
                $balance += (($bets[$i][1] * $games[$bets[$i][0] - 1][$temp]) - $bets[$i][1]);
            }
        }

        // Возвращаем итоговый баланс
        return $balance;
    }
?>